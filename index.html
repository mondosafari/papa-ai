<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ãƒ‘ãƒ‘AIï¼ˆãƒ†ã‚¹ãƒˆï¼‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #f5f5f5;
      padding: 20px;
    }
    h2 {
      text-align: center;
    }
    .script-box {
      background: white;
      padding: 24px;
      border-radius: 16px;
      font-size: 1.3em;
      margin: 20px 0;
      text-align: center;
      min-height: 80px;
    }
    .buttons {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
    }
    button {
      font-size: 1em;
      padding: 14px 20px;
      border-radius: 12px;
      border: none;
      background: #4a90e2;
      color: white;
    }
    button.stop {
      background: #999;
    }
    #status {
      text-align: center;
      margin-top: 16px;
      color: #555;
    }
  </style>
</head>
<body>

<h2>ğŸ™ ãƒ‘ãƒ‘ã¨ãŠã¯ãªã—</h2>

<div class="script-box" id="scriptText">
  ãŠã¯ã‚ˆã†ã€‚ãƒ‘ãƒ‘ã ã‚ˆ
</div>

<div class="buttons">
  <button onclick="startRecording()">éŒ²éŸ³ã™ã‚‹</button>
  <button class="stop" onclick="stopRecording()">ã¨ã‚ã‚‹</button>
  <button onclick="nextScript()">ã¤ãã¸</button>
</div>

<p id="status">ã‚ˆã¿ãªãŒã‚‰ ã¯ãªã—ã¦ã­</p>

<script>
  const scripts = [
    "ãŠã¯ã‚ˆã†ã€‚ãƒ‘ãƒ‘ã ã‚ˆ",
    "ãã‚‡ã†ã‚‚ ã„ã£ã±ã„ ãŠã¯ãªã—ã—ã‚ˆã†ã­",
    "ã©ã‚“ãª ãã‚‚ã¡ã§ã‚‚ ã ã„ã˜ã ã‚ˆ",
    "ãƒ‘ãƒ‘ã¯ ã„ã¤ã‚‚ ã¿ã‹ãŸ ã ã‚ˆ"
  ];

  let index = 0;
  let recorder;
  let audioChunks = [];

  async function startRecording() {
    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
    recorder = new MediaRecorder(stream);
    recorder.start();
    audioChunks = [];

    recorder.ondataavailable = e => audioChunks.push(e.data);
    document.getElementById("status").innerText = "ã‚ããŠã‚“ã¡ã‚…ã†â€¦";
  }

  function stopRecording() {
    if (!recorder) return;
    recorder.stop();
    recorder.onstop = () => {
      const blob = new Blob(audioChunks, { type: "audio/webm" });
      const audioURL = URL.createObjectURL(blob);
      const audio = new Audio(audioURL);
      audio.play();
      document.getElementById("status").innerText = "ãƒ‘ãƒ‘ã®ã“ãˆãŒ ã§ãŸã­";
    };
  }

  function nextScript() {
    index++;
    if (index >= scripts.length) {
      document.getElementById("scriptText").innerText = "ãŠã¤ã‹ã‚Œã•ã¾ã€‚ã¾ãŸ ã¯ãªãã†ã­";
      document.getElementById("status").innerText = "";
    } else {
      document.getElementById("scriptText").innerText = scripts[index];
      document.getElementById("status").innerText = "ã¤ãã‚‚ ã‚ˆã‚“ã§ã¿ã‚ˆã†";
    }
  }
</script>

</body>
</html>
